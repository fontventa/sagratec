(self.webpackChunksagratec=self.webpackChunksagratec||[]).push([[327],{327:(n,o,t)=>{"use strict";t.r(o),t.d(o,{LoginPageModule:()=>C});var e=t(8583),i=t(665),r=t(7823),s=t(1348),a=t(4762),c=t(7465),g=t(8720),d=t(7300),l=t(1841);let p=(()=>{class n{constructor(){}login(n,o){return(0,a.mG)(this,void 0,void 0,function*(){return yield this.api.HttpPost("/sagrateclogin",{PrefijoLicencia:"4520",CodigoCliente:"0",User:n,Clave:o})})}setLogin(n){return new Promise((o,t)=>{try{this.usuario=n,this.api.loginToken=n.Token,localStorage.setItem("token",n.Token),o()}catch(e){t(new Error(e.message))}})}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),u=(()=>{class n{constructor(n,o){this.Login=n,this.http=o,this.URL="https://apisagratecualc.azurewebsites.net/api",this.Login.api=this}HttpGet(n,o){return(0,a.mG)(this,void 0,void 0,function*(){return new Promise((t,e)=>{let i=new l.WM;i=i.append("Content-Type","application/json"),null!=this.loginToken&&(i=i.append("Access-Token",this.loginToken)),o=o||{};let r=new l.LE;for(let n in o)r=r.set(n,null!=o[n]?o[n].toString():"");this.http.get(this.URL+n,{headers:i,withCredentials:!0,params:r}).subscribe(n=>{n.Error&&n.Error.HasError?e(new Error(n.Error.Message)):t(n.content)},n=>{e(new Error(n))})})})}HttpPost(n,o){return(0,a.mG)(this,void 0,void 0,function*(){return new Promise((t,e)=>{let i=new l.WM;i=i.append("Content-Type","application/json"),null!=this.loginToken&&(i=i.append("Access-Token",this.loginToken)),o=o||{};const r={headers:i,withCredentials:!0};this.http.post(this.URL+n,JSON.stringify(o),r).subscribe(n=>{n.Error&&n.Error.HasError?e(new Error(n.Error.Message)):t(n.content)},n=>{e(new Error(n))})})})}}return n.\u0275fac=function(o){return new(o||n)(g.LFG(p),g.LFG(l.eN))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),h=(()=>{class n{constructor(){}clear(n){return new Promise((o,t)=>{n&&(this.email="",this.hash="")})}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const f=["password"];function m(n,o){if(1&n&&(g.TgZ(0,"p"),g._uU(1),g.qZA()),2&n){const n=g.oxw();g.xp6(1),g.hij("v",n.globalVar.version," | Powered by Fontventa")}}const x=[{path:"",component:(()=>{class n{constructor(n,o,t,e,r,s,a){this.nav=n,this.alertService=o,this.formBuilder=t,this.api=e,this.navCtrl=r,this.navParams=s,this.menuCtrl=a,this.menuCtrl.enable(!1),this.api.loginToken=localStorage.getItem("token"),this.formLogin=t.group({user:["",i.kI.compose([i.kI.required])],password:["",i.kI.compose([i.kI.required])]}),this.ready=!0}ngOnInit(){this.globalVar=c.U}doLogin(){return(0,a.mG)(this,void 0,void 0,function*(){try{if(this.password&&this.password.toString().trim().length>0&&this.user&&this.user.toString().trim().length>0){yield this.alertService.showLoading("Iniciando sesi\xf3n...");const n=yield this.api.Login.login(this.user,this.password);n&&n.Token?(yield this.api.Login.setLogin(n),this.alertService.hideLoading(),this.navCtrl.navigateRoot("maquinas-list")):(localStorage.setItem("token",""),c.U.hideSplash=!0,this.alertService.showToastError("Usuario o contrase\xf1a incorrectos."))}}catch(n){this.alertService.showToastError(n.message),c.U.hideSplash=!0}finally{yield this.alertService.hideLoading()}})}eventHandler(n,o){if(13==n)switch(o){case"email":this.passwordInput.setFocus();break;case"password":this.doLogin()}}registro(){return(0,a.mG)(this,void 0,void 0,function*(){yield this.navCtrl.navigateForward("register")})}provocarError(){return(0,a.mG)(this,void 0,void 0,function*(){})}}return n.\u0275fac=function(o){return new(o||n)(g.Y36(r.SH),g.Y36(d.c),g.Y36(i.qu),g.Y36(u),g.Y36(r.SH),g.Y36(h),g.Y36(r._q))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login"]],viewQuery:function(n,o){if(1&n&&g.Gf(f,5),2&n){let n;g.iGM(n=g.CRH())&&(o.passwordInput=n.first)}},decls:22,vars:4,consts:[[1,"ruecaFlotante"],[1,"boxLogin"],[1,"boxLogin-body"],[1,"boxLogin-logo"],[1,"titleForm"],[3,"click"],[3,"formGroup"],[1,"boxLogin-form"],[1,"boxLogin-form-item"],[1,"fal","fa-user-circle"],["clear-input","","placeholder","Usuario","formControlName","user","name","user",3,"ngModel","keypress","ngModelChange"],["clear-input","","placeholder","Contrase\xf1a","formControlName","password","name","password",2,"-webkit-text-security","disc",3,"ngModel","keypress","ngModelChange"],[1,"mt30"],[1,"boton","degradado","large","w100",3,"click"],[1,"boxLogin-footer"],[4,"ngIf"]],template:function(n,o){1&n&&(g.TgZ(0,"ion-content"),g._UZ(1,"div",0),g.TgZ(2,"div",1),g.TgZ(3,"div",2),g._UZ(4,"div",3),g.TgZ(5,"div"),g.TgZ(6,"div",4),g.TgZ(7,"h2",5),g.NdJ("click",function(){return o.provocarError()}),g._uU(8,"Inicio de sesi\xf3n"),g.qZA(),g.qZA(),g.TgZ(9,"form",6),g.TgZ(10,"div",7),g.TgZ(11,"div",8),g._UZ(12,"i",9),g.TgZ(13,"ion-input",10),g.NdJ("keypress",function(n){return o.eventHandler(n.keyCode,"user")})("ngModelChange",function(n){return o.user=n}),g.qZA(),g.qZA(),g.TgZ(14,"div",8),g._UZ(15,"i",9),g.TgZ(16,"ion-input",11),g.NdJ("keypress",function(n){return o.eventHandler(n.keyCode,"password")})("ngModelChange",function(n){return o.password=n}),g.qZA(),g.qZA(),g.TgZ(17,"div",12),g.TgZ(18,"button",13),g.NdJ("click",function(){return o.doLogin()}),g._uU(19," Entrar "),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(20,"div",14),g.YNc(21,m,2,1,"p",15),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&n&&(g.xp6(9),g.Q6J("formGroup",o.formLogin),g.xp6(4),g.Q6J("ngModel",o.user),g.xp6(3),g.Q6J("ngModel",o.password),g.xp6(5),g.Q6J("ngIf",null!=o.globalVar&&null!=o.globalVar))},directives:[r.W2,i._Y,i.JL,i.sg,r.pK,r.j9,i.JJ,i.u,e.O5],styles:['.ruecaFlotante[_ngcontent-%COMP%]{position:fixed;top:-66px;right:-120px;z-index:99}.ruecaFlotante[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:270px}.boxLogin[_ngcontent-%COMP%]{position:relative;height:100%;background-size:cover;background-position:100% 100%}.boxLogin[_ngcontent-%COMP%]:after{content:"";width:1049px;height:834px;z-index:1;opacity:.5;bottom:-51px;position:fixed;left:-79px}.boxLogin[_ngcontent-%COMP%]:before{content:"";width:100%;height:100%;background-image:linear-gradient(-45deg,#009da594 30%,#043644a6 45%,#043644a6 70%);position:absolute;opacity:1;z-index:1}.boxLogin-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;padding:50px;width:100%;height:100%;position:relative;z-index:9}.boxLogin-body.centradoVerticalmente[_ngcontent-%COMP%]{justify-content:center}.boxLogin-footer[_ngcontent-%COMP%]{padding:20px 0 0;text-align:center;color:#fff}.boxLogin-footer[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#fff;font-size:14px;display:inline-block}.boxLogin-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px}.boxLogin-logo[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.boxLogin-logo[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:39px;width:100%}.boxLogin-form[_ngcontent-%COMP%]{background-color:#fff;padding:50px;border-radius:15px;position:relative;z-index:2}@media (min-width: 768px){.boxLogin-form[_ngcontent-%COMP%]{max-width:402px}}@media (max-width: 767px){.boxLogin-form[_ngcontent-%COMP%]{width:100%}}.boxLogin-form-item[_ngcontent-%COMP%]{padding-left:75px;position:relative;border-bottom:2px solid #d9d9d9;padding-top:22px;padding-bottom:22px}.boxLogin-form-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:45px;position:absolute;left:12px;top:50%;margin-top:-22px;color:var(--ion-color-primary)}.boxLogin-form-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px;color:#111}ion-input[_ngcontent-%COMP%]{--placeholder-color:#000;--placeholder-opacity:0.7}.titleForm[_ngcontent-%COMP%]{margin-bottom:30px}.titleForm[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;text-align:center;font-family:var(--ion-font-secondary);font-size:40px;font-weight:600}.boxIdiomas[_ngcontent-%COMP%]{display:flex;justify-content:center}.boxIdiomas[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 10px;color:#ccc}.boxIdiomas[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:19px;color:#111;font-weight:400;background-color:initial}.boxIdiomas[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{font-weight:700;color:var(--ion-color-primary);background:#0000}@media (max-width: 575.98px){.boxLogin-form[_ngcontent-%COMP%]{padding:30px}.titleForm[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}.boxLogin-body[_ngcontent-%COMP%]{padding:40px}.ruecaFlotante[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:207px}.boton[_ngcontent-%COMP%]{font-size:21px}.boxIdiomas[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:15px}.boxLogin-form-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:34px}.boxLogin-logo[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:30px}}ion-content[_ngcontent-%COMP%]{--ion-background-color:var(--ion-color-primary)}']}),n})()}];let b=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[s.Bz.forChild(x)],s.Bz]}),n})(),C=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[e.ez,i.u5,i.UX,r.Pc,b]]}),n})()}}]);