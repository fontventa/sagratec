(self.webpackChunksagratec=self.webpackChunksagratec||[]).push([[6158],{6158:(o,n,t)=>{"use strict";t.r(n),t.d(n,{LoginPageModule:()=>b});var i=t(8583),e=t(665),r=t(7823),g=t(1348),a=t(4762),s=t(7465),c=t(4879),l=t(3234),d=t(8720),p=t(7300),u=t(5768),h=t(5937);function m(o,n){if(1&o&&(d.TgZ(0,"p"),d._uU(1),d.qZA()),2&o){const o=d.oxw();d.xp6(1),d.hij("v",o.globalVar.version," | Powered by Fontventa")}}const f=[{path:"",component:(()=>{class o{constructor(o,n,t,i,r,g,a){this.nav=o,this.alertService=n,this.formBuilder=t,this.api=i,this.navCtrl=r,this.navParams=g,this.menuCtrl=a,this.menuCtrl.enable(!1),this.api.loginToken=localStorage.getItem("token"),this.formLogin=t.group({codigo:["",e.kI.compose([e.kI.required])],user:["",e.kI.compose([e.kI.required])],password:["",e.kI.compose([e.kI.required])]}),this.ready=!0}ngOnInit(){this.globalVar=s.U,this.doAutoLogin()}doLogin(){return(0,a.mG)(this,void 0,void 0,function*(){try{if(this.password&&this.password.toString().trim().length>0&&this.user&&this.user.toString().trim().length>0&&this.codigo&&this.codigo.toString().trim().length>0){yield this.alertService.showLoading("Iniciando sesi\xf3n...");const o=yield this.api.Login.login(this.codigo,this.user,this.password);o&&o.Token?(this.api.Login.setLogin(o,this.codigo,this.user),yield this.alertService.hideLoading(),yield c.y.instance.executeMenu(),this.navCtrl.navigateRoot("presupuestos")):(localStorage.setItem("token",""),s.U.hideSplash=!0,this.alertService.showToastError("Usuario o contrase\xf1a incorrectos."))}}catch(o){this.alertService.showToastError("Usuario o contrase\xf1a incorrectos"),s.U.hideSplash=!0,yield this.alertService.hideLoading()}})}doAutoLogin(){return(0,a.mG)(this,void 0,void 0,function*(){try{const o=localStorage.getItem("token"),n=localStorage.getItem("ogidoccetargas"),t=localStorage.getItem("emanresucetargas");this.codigo=n,this.user=t,null!=o&&null!=o&&""!=o&&null!=n&&null!=n&&""!=n&&null!=t&&null!=t&&""!=t&&(yield this.alertService.showLoading("Iniciando sesi\xf3n..."),this.api.Login.usuario=new l.Z,this.api.Login.usuario.NombreCompleto=t,this.api.Login.usuario.Codigo=n,this.api.Login.usuario.Token=o,this.api.loginToken=o,this.api.logged=!0,yield this.alertService.hideLoading(),yield c.y.instance.executeMenu(),this.navCtrl.navigateRoot("presupuestos"))}catch(o){console.log(o),s.U.hideSplash=!0,this.api.Login.logOut(),this.navParams.clear(!0)}})}}return o.\u0275fac=function(n){return new(n||o)(d.Y36(r.SH),d.Y36(p.c),d.Y36(e.qu),d.Y36(u.s),d.Y36(r.SH),d.Y36(h.l),d.Y36(r._q))},o.\u0275cmp=d.Xpm({type:o,selectors:[["app-login"]],decls:28,vars:5,consts:[[1,"ruecaFlotante"],[1,"boxLogin"],[1,"boxLogin-body"],[1,"figureApp"],["src","assets/images/figure-software.svg","alt",""],[1,"boxLogin-logo"],["src","assets/images/logoWhite.svg","alt","logo"],[1,"titleForm"],[3,"formGroup"],[1,"boxLogin-form"],[1,"boxLogin-form-item"],[1,"fal","fa-cog"],["clear-input","","placeholder","Codigo","formControlName","codigo","name","codigo",3,"ngModel","ngModelChange"],[1,"fal","fa-user-circle"],["clear-input","","placeholder","Usuario","formControlName","user","name","user",3,"ngModel","ngModelChange"],[1,"fal","fa-unlock"],["clear-input","","placeholder","Contrase\xf1a","formControlName","password","name","password","id","password",2,"-webkit-text-security","disc",3,"ngModel","ngModelChange"],[1,"mt30"],[1,"boton","degradado","large","w100",3,"click"],[1,"boxLogin-footer"],[4,"ngIf"]],template:function(o,n){1&o&&(d.TgZ(0,"ion-content"),d._UZ(1,"div",0),d.TgZ(2,"div",1),d.TgZ(3,"div",2),d.TgZ(4,"div",3),d._UZ(5,"img",4),d.qZA(),d.TgZ(6,"div",5),d._UZ(7,"img",6),d.qZA(),d.TgZ(8,"div"),d.TgZ(9,"div",7),d.TgZ(10,"h2"),d._uU(11,"Inicio de sesi\xf3n"),d.qZA(),d.qZA(),d.TgZ(12,"form",8),d.TgZ(13,"div",9),d.TgZ(14,"div",10),d._UZ(15,"i",11),d.TgZ(16,"ion-input",12),d.NdJ("ngModelChange",function(o){return n.codigo=o}),d.qZA(),d.qZA(),d.TgZ(17,"div",10),d._UZ(18,"i",13),d.TgZ(19,"ion-input",14),d.NdJ("ngModelChange",function(o){return n.user=o}),d.qZA(),d.qZA(),d.TgZ(20,"div",10),d._UZ(21,"i",15),d.TgZ(22,"ion-input",16),d.NdJ("ngModelChange",function(o){return n.password=o}),d.qZA(),d.qZA(),d.TgZ(23,"div",17),d.TgZ(24,"button",18),d.NdJ("click",function(){return n.doLogin()}),d._uU(25," Entrar "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(26,"div",19),d.YNc(27,m,2,1,"p",20),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&o&&(d.xp6(12),d.Q6J("formGroup",n.formLogin),d.xp6(4),d.Q6J("ngModel",n.codigo),d.xp6(3),d.Q6J("ngModel",n.user),d.xp6(3),d.Q6J("ngModel",n.password),d.xp6(5),d.Q6J("ngIf",null!=n.globalVar&&null!=n.globalVar))},directives:[r.W2,e._Y,e.JL,e.sg,r.pK,r.j9,e.JJ,e.u,i.O5],styles:['.ruecaFlotante[_ngcontent-%COMP%]{position:fixed;top:-66px;right:-120px;z-index:99}.ruecaFlotante[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:270px}.boxLogin[_ngcontent-%COMP%]{position:relative;height:100%;background-image:url(/assets/images/bg-login.jpg);background-size:cover;background-position:100% 100%}.boxLogin[_ngcontent-%COMP%]:after{content:"";width:1049px;height:834px;z-index:1;opacity:.5;bottom:-51px;position:fixed;left:-79px}.boxLogin[_ngcontent-%COMP%]:before{content:"";width:100%;height:100%;position:absolute;opacity:1;z-index:1}.boxLogin-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;padding:50px;width:100%;height:100%;position:relative;z-index:9}.boxLogin-body.centradoVerticalmente[_ngcontent-%COMP%]{justify-content:center}.boxLogin-footer[_ngcontent-%COMP%]{padding:20px 0 0;text-align:center;color:#fff}.boxLogin-footer[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#fff;font-size:14px;display:inline-block}.boxLogin-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px}.boxLogin-logo[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.boxLogin-logo[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%}.boxLogin-form[_ngcontent-%COMP%]{background-color:#fff;padding:50px;border-radius:15px;position:relative;z-index:2}.figureApp[_ngcontent-%COMP%]{position:absolute;top:0;left:-36px}@media (min-width: 768px){.boxLogin-form[_ngcontent-%COMP%]{max-width:402px}}@media (max-width: 767px){.boxLogin-form[_ngcontent-%COMP%]{width:100%}}.boxLogin-form-item[_ngcontent-%COMP%]{padding-left:75px;position:relative;border-bottom:2px solid #d9d9d9;padding-top:22px;padding-bottom:22px}.boxLogin-form-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px;position:absolute;left:12px;top:50%;margin-top:-14px;color:#904e91}.boxLogin-form-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px;color:#111}ion-input[_ngcontent-%COMP%]{--placeholder-color:#000;--placeholder-opacity:0.7}.titleForm[_ngcontent-%COMP%]{margin-bottom:30px}.titleForm[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;text-align:center;font-family:var(--ion-font-secondary);font-size:40px;font-weight:600}.boxIdiomas[_ngcontent-%COMP%]{display:flex;justify-content:center}.boxIdiomas[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 10px;color:#ccc}.boxIdiomas[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:19px;color:#111;font-weight:400;background-color:initial}.boxIdiomas[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{font-weight:700;color:var(--ion-color-primary);background:#0000}@media (max-width: 575.98px){.boxLogin-form[_ngcontent-%COMP%]{padding:30px}.titleForm[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}.boxLogin-body[_ngcontent-%COMP%]{padding:40px}.ruecaFlotante[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:207px}.boton[_ngcontent-%COMP%]{font-size:21px}.boxIdiomas[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:15px}.boxLogin-form-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px}}ion-content[_ngcontent-%COMP%]{--ion-background-color:var(--ion-color-primary)}']}),o})()}];let x=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=d.oAB({type:o}),o.\u0275inj=d.cJS({imports:[[g.Bz.forChild(f)],g.Bz]}),o})(),b=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=d.oAB({type:o}),o.\u0275inj=d.cJS({imports:[[i.ez,e.u5,e.UX,r.Pc,x]]}),o})()}}]);